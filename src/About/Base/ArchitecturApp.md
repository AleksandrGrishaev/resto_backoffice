# Kitchen App - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–≤–æ–¥–∫–∞

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

Kitchen App - **–µ–¥–∏–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –∏ —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã:

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Single Repository + Role-based UI**

- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Vue 3 + Vuetify + Pinia + Vite + Capacitor
- **–ü—Ä–∏–Ω—Ü–∏–ø:** –û–¥–∏–Ω –∫–æ–¥ ‚Üí –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** Backoffice (–∞–¥–º–∏–Ω) + POS (–∫–∞—Å—Å–∞) –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** Web app (–±—Ä–∞—É–∑–µ—Ä) + Mobile app (Capacitor)

### **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**

#### **üì± Mobile App** (—á–µ—Ä–µ–∑ Capacitor)

- **POS —Ä–æ–ª–∏:** –ö–∞—Å—Å–∏—Ä—ã, –æ—Ñ–∏—Ü–∏–∞–Ω—Ç—ã ‚Üí **Offline-first —Ä–µ–∂–∏–º**
- **Admin —Ä–æ–ª–∏:** –ú–µ–Ω–µ–¥–∂–µ—Ä—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã ‚Üí **Online —Ä–µ–∂–∏–º**
- **–§—É–Ω–∫—Ü–∏–∏:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º

#### **üåê Web App** (—á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä)

- **–í—Å–µ —Ä–æ–ª–∏:** –†–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–†–µ–∂–∏–º:** –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ online
- **–§—É–Ω–∫—Ü–∏–∏:** –¢–æ—Ç –∂–µ –∫–æ–¥, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Single Repository –ø–æ–¥—Ö–æ–¥–∞

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**

- üéØ **–ï–¥–∏–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞** - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
- ü§ñ **AI-friendly** - –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ –¥–ª—è –ò–ò –ø–æ–º–æ—â–Ω–∏–∫–∞
- üîÑ **Shared components** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- üìä **Shared stores** - –µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –≤–µ–∑–¥–µ

### **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**

- üì± **–ù–∞—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç** –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- üíª **–í–µ–±-–¥–æ—Å—Ç—É–ø** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á
- üé® **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π UX** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ª–æ–≥–∏–∫–∞
- üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –Ω–µ—Ç —Ä–∞–∑–ª–∏—á–∏–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

### **–î–ª—è –±–∏–∑–Ω–µ—Å–∞:**

- üí∞ **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, –æ–¥–Ω–∞ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞
- üöÄ **–ë—ã—Å—Ç—Ä—ã–π time-to-market** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–æ–Ω–æ—Ä–µ–ø–æ
- üõ†Ô∏è **–ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
kitchen-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ views/                    # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ backoffice/          # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accounts/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counteragents/   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products/       # –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–º
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reports/        # –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pos/                # POS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ tables/         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–∞–º–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ orders/         # –ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ menu/           # –ú–µ–Ω—é –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ payments/       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ stores/                  # Pinia stores (–µ–¥–∏–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ account/            # –°—á–µ—Ç–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counteragents/      # –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ menu/              # –ú–µ–Ω—é —Å —Ü–µ–Ω–∞–º–∏ –∏ —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pos/               # POS-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ stores
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders/        # –ó–∞–∫–∞–∑—ã (offline-first)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tables/        # –°—Ç–æ–ª—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payments/      # –ü–ª–∞—Ç–µ–∂–∏ –∏ –∫–∞—Å—Å–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shared/            # –û–±—â–∏–µ stores –∏ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/             # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ atoms/             # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ molecules/         # –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ organisms/         # –°–ª–æ–∂–Ω—ã–µ –±–ª–æ–∫–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ router/                # –†–æ—É—Ç–∏–Ω–≥ —Å role-based –¥–æ—Å—Ç—É–ø–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ composables/           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ services/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ repositories/          # –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (–¥–ª—è POS)
‚îÇ   ‚îî‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã
‚îÇ
‚îú‚îÄ‚îÄ capacitor.config.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ vite.config.ts             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±-—Å–±–æ—Ä–∫–∏
‚îî‚îÄ‚îÄ package.json               # –ï–¥–∏–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## Role-based Architecture

### **–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π:**

```typescript
type UserRole = 'admin' | 'manager' | 'cashier' | 'waiter' | 'kitchen'

interface User {
  id: string
  name: string
  role: UserRole
  permissions: string[]
}
```

### **–†–æ—É—Ç–∏–Ω–≥ –ø–æ —Ä–æ–ª—è–º:**

```typescript
// router/index.ts
const routes = [
  {
    path: '/admin',
    component: BackofficeLayout,
    meta: {
      roles: ['admin', 'manager'],
      requiresOnline: true
    },
    children: [
      { path: 'menu', component: () => import('@/views/backoffice/menu/MenuView.vue') },
      { path: 'products', component: () => import('@/views/backoffice/products/ProductsView.vue') },
      { path: 'reports', component: () => import('@/views/backoffice/reports/ReportsView.vue') }
    ]
  },
  {
    path: '/pos',
    component: PosLayout,
    meta: {
      roles: ['cashier', 'waiter'],
      supportsOffline: true
    },
    children: [
      { path: 'orders', component: () => import('@/views/pos/orders/OrdersView.vue') },
      { path: 'tables', component: () => import('@/views/pos/tables/TablesView.vue') },
      { path: 'menu', component: () => import('@/views/pos/menu/MenuView.vue') }
    ]
  }
]
```

### **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ stores:**

```typescript
// stores/ordersStore.ts
export const useOrdersStore = defineStore('orders', () => {
  const { userRole, isOfflineCapable } = useAuth()
  const { isMobile } = usePlatform()

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  const persistenceStrategy = computed(() => {
    // POS —Ä–æ–ª–∏ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ = offline-first
    if (isMobile.value && ['cashier', 'waiter'].includes(userRole.value)) {
      return new OfflineFirstPersistence()
    }
    // –ê–¥–º–∏–Ω —Ä–æ–ª–∏ = online-first
    return new OnlineFirstPersistence()
  })

  // –ï–¥–∏–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
  async function loadOrders() {
    const result = await persistenceStrategy.value.findAll()
    if (result.success) {
      orders.value = result.data || []
    }
  }

  return { orders, loadOrders }
})
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### **–î–ª—è Backoffice —Ñ—É–Ω–∫—Ü–∏–π (Store + Service):**

```typescript
// –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
UI Components ‚Üí Pinia Store ‚Üí Service Layer ‚Üí API/localStorage
```

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**

- ‚úÖ Online-first –ø–æ–¥—Ö–æ–¥
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –õ–µ–≥–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ localStorage ‚Üí API
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å async –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

### **–î–ª—è POS —Ñ—É–Ω–∫—Ü–∏–π (Store + Repository + Sync):**

```typescript
// –°–ª–æ–∂–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
UI Components ‚Üí Pinia Store ‚Üí Repository Interface ‚Üí Local/API Repository + Sync Service
```

**–ü—Ä–∏–Ω—Ü–∏–ø—ã:**

- ‚úÖ Offline-first –ø–æ–¥—Ö–æ–¥
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ UI
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª—é—à–Ω —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

---

## –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **Build –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

```json
// package.json
{
  "scripts": {
    "dev": "vite --mode development",
    "build:web": "vite build --mode web",
    "build:mobile": "vite build --mode mobile && cap sync",
    "preview:web": "vite preview",
    "ios": "cap run ios",
    "android": "cap run android",
    "sync": "cap sync"
  }
}
```

### **Environment-based features:**

```typescript
// .env.web
VITE_PLATFORM = web
VITE_USE_API = true
VITE_ENABLE_OFFLINE = false

// .env.mobile
VITE_PLATFORM = mobile
VITE_USE_API = false
VITE_ENABLE_OFFLINE = true
```

### **–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-–∑–∞–≤–∏—Å–∏–º–∞—è –ª–æ–≥–∏–∫–∞:**

```typescript
// composables/usePlatform.ts
export function usePlatform() {
  const platform = import.meta.env.VITE_PLATFORM as 'web' | 'mobile'
  const isMobile = computed(() => platform === 'mobile')
  const isWeb = computed(() => platform === 'web')
  const offlineEnabled = import.meta.env.VITE_ENABLE_OFFLINE === 'true'

  return { platform, isMobile, isWeb, offlineEnabled }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
const { isMobile, offlineEnabled } = usePlatform()

// –£—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π
if (isMobile.value && offlineEnabled) {
  await initializeOfflineSync()
}
```

---

## Stores Architecture

### **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

```
src/stores/
‚îú‚îÄ‚îÄ account/              # –°—á–µ—Ç–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Backoffice)
‚îú‚îÄ‚îÄ counteragents/        # –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (Backoffice)
‚îú‚îÄ‚îÄ menu/                # –ú–µ–Ω—é –∏ —Ä–µ—Ü–µ–ø—Ç—ã (Shared)
‚îú‚îÄ‚îÄ preparation/          # –ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã (Backoffice)
‚îú‚îÄ‚îÄ productsStore/        # –ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (Shared)
‚îú‚îÄ‚îÄ recipes/             # –†–µ—Ü–µ–ø—Ç—ã (Backoffice)
‚îú‚îÄ‚îÄ storage/             # –°–∫–ª–∞–¥—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ (Backoffice)
‚îú‚îÄ‚îÄ supplier_2/          # –ó–∞–∫–∞–∑—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º (Backoffice)
‚îú‚îÄ‚îÄ pos/                 # POS-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ stores
‚îÇ   ‚îú‚îÄ‚îÄ orders/          # –ó–∞–∫–∞–∑—ã –∏ —Å—á–µ—Ç–∞ (Offline-first)
‚îÇ   ‚îú‚îÄ‚îÄ tables/          # –°—Ç–æ–ª—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ payments/        # –ü–ª–∞—Ç–µ–∂–∏ –∏ –∫–∞—Å—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ menu/           # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é –¥–ª—è POS
‚îî‚îÄ‚îÄ shared/              # –û–±—â–∏–µ stores –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è
```

### **–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

- **auth/** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
- **cashier/** - –ü—Ä–æ–¥–∞–∂–∏ –∏ –∫–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **finance/** - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ P&L
- **kitchen/** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫—É—Ö–Ω–µ–π (–∑–∞–∫–∞–∑—ã, —Å—Ç–∞—Ç—É—Å—ã)
- **shifts/** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω–∞–º–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

### **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω Store:**

```typescript
// –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –ª—é–±–æ–≥–æ store
export const useEntityStore = defineStore('entity', () => {
  // State
  const entities = ref<Entity[]>([])
  const loading = ref(false)
  const error = ref<string | null>(null)

  // –ü–ª–∞—Ç—Ñ–æ—Ä–º–æ-–∑–∞–≤–∏—Å–∏–º–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  const { persistenceLayer } = usePersistence('entity')

  // Computed
  const activeEntities = computed(() => entities.value.filter(e => e.isActive))

  // Actions - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
  async function loadEntities(): Promise<boolean> {
    try {
      loading.value = true
      error.value = null

      const result = await persistenceLayer.findAll()
      if (result.success) {
        entities.value = result.data || []
        return true
      } else {
        error.value = result.error || 'Failed to load entities'
        return false
      }
    } catch (err) {
      error.value = err instanceof Error ? err.message : 'Unknown error'
      return false
    } finally {
      loading.value = false
    }
  }

  return {
    entities,
    loading,
    error,
    activeEntities,
    loadEntities
  }
})
```

---

## Persistence Strategies

### **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:**

```typescript
// composables/usePersistence.ts
export function usePersistence<T>(entityType: string) {
  const { userRole } = useAuth()
  const { isMobile, offlineEnabled } = usePlatform()

  const persistenceLayer = computed(() => {
    // POS —Ä–æ–ª–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π offline
    if (['cashier', 'waiter'].includes(userRole.value) && offlineEnabled) {
      return new OfflineFirstRepository<T>(entityType)
    }

    // Admin —Ä–æ–ª–∏ - online first
    if (['admin', 'manager'].includes(userRole.value)) {
      return new OnlineFirstRepository<T>(entityType)
    }

    // Fallback - local storage
    return new LocalStorageRepository<T>(entityType)
  })

  return { persistenceLayer }
}
```

### **–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è:**

#### **Online-first (–¥–ª—è Backoffice):**

```
API Request ‚Üí Success: Update Local Cache
           ‚Üí Failure: Show Error + Use Cache if available
```

#### **Offline-first (–¥–ª—è POS):**

```
Local Storage ‚Üí Always works (instant UI)
             ‚Üí Queue for Sync ‚Üí Background API calls
```

#### **Hybrid (–¥–ª—è Shared –¥–∞–Ω–Ω—ã—Ö):**

```
Check Online ‚Üí Online: API + Update Cache
            ‚Üí Offline: Use Cache + Queue updates
```

---

## Service Response Pattern

### **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:**

```typescript
interface ServiceResponse<T> {
  success: boolean
  data?: T
  error?: string
  metadata?: {
    timestamp: string
    source: 'local' | 'api' | 'cache'
    version?: string
    platform?: 'web' | 'mobile'
  }
}
```

---

## Bundle Optimization

### **Lazy loading –ø–æ —Ä–æ–ª—è–º:**

```typescript
// router/guards.ts
router.beforeEach(async to => {
  const { userRole } = useAuth()

  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–æ–ª–∏
  if (to.path.startsWith('/admin') && userRole.value === 'admin') {
    await import('@/stores/backoffice') // Lazy load admin stores
  }

  if (to.path.startsWith('/pos') && ['cashier', 'waiter'].includes(userRole.value)) {
    await import('@/stores/pos') // Lazy load POS stores
  }
})
```

### **Code splitting:**

```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          backoffice: ['./src/views/backoffice'],
          pos: ['./src/views/pos'],
          shared: ['./src/components', './src/utils']
        }
      }
    }
  }
})
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### **–ü–æ—á–µ–º—É Single Repository –ø–æ–¥—Ö–æ–¥ –æ–ø—Ç–∏–º–∞–ª–µ–Ω:**

- üéØ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç, –æ–¥–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ü§ñ **AI-friendly** - –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- üîÑ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, stores, –ª–æ–≥–∏–∫–∞
- üì± **–ì–∏–±–∫–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** - –≤–µ–± + –º–æ–±–∞–π–ª –∏–∑ –æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
- üí∞ **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–æ–Ω–æ—Ä–µ–ø–æ
- ‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏** - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É –≤–µ–∑–¥–µ

### **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã:**

- üë®‚Äçüíº **Admin —Ä–æ–ª–∏** ‚Üí Online-first, rich UI, –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- üë®‚Äçüç≥ **POS —Ä–æ–ª–∏** ‚Üí Offline-first, streamlined UI, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- üì± **Mobile** ‚Üí –ù–∞—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç, offline capabilities
- üåê **Web** ‚Üí –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, administrative features

**–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≥–∏–±–∫–æ—Å—Ç—å –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏!** üöÄ
