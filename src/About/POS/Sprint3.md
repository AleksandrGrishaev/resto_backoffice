# Sprint 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å POS-—Å–º–µ–Ω–∞–º–∏

## –¶–µ–ª—å Sprint

–î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ POS-—Å–∏—Å—Ç–µ–º–µ —Å –¥–≤—É–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏:

1. **Backoffice ‚Üí POS**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Purchase Orders
2. **POS Direct**: –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –∫–∞—Å—Å—ã (—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, —Ä–µ–º–æ–Ω—Ç –∏ —Ç.–¥.)

---

## User Stories

### US-1: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–∑ –∫–∞—Å—Å—ã

**–ö–∞–∫** –∫–∞—Å—Å–∏—Ä
**–Ø —Ö–æ—á—É** —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ POS (–∫–æ–º–º—É–Ω–∞–ª–∫–∞, —Ä–µ–º–æ–Ω—Ç, –∑–∞—Ä–ø–ª–∞—Ç–∞)
**–ß—Ç–æ–±—ã** –±—ã—Å—Ç—Ä–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ backoffice

**Acceptance Criteria:**

- ‚úÖ –î–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ —Å –ø–æ–ª—è–º–∏: counteragent, amount, description, category
- ‚úÖ –¢–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ (–Ω–µ pending payments)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ —Å –∫–∞—Å—Å—ã (account type = cash)
- ‚úÖ –†–∞—Å—Ö–æ–¥ —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (–±–µ–∑ pending —Å—Ç–∞—Ç—É—Å–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã —É—Ö–æ–¥–∏—Ç –≤ –º–∏–Ω—É—Å ‚Üí –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–º–µ–Ω—ã

---

### US-2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º

**–ö–∞–∫** –∫–∞—Å—Å–∏—Ä
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ backoffice
**–ß—Ç–æ–±—ã** –≤—ã–¥–∞–≤–∞—Ç—å –Ω–∞–ª–∏—á–Ω—ã–µ –∫—É—Ä—å–µ—Ä–∞–º/–ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º –∏–∑ –∫–∞—Å—Å—ã

**Acceptance Criteria:**

- ‚úÖ –°–ø–∏—Å–æ–∫ pending payments –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–∑ backoffice)
- ‚úÖ –§–∏–ª—å—Ç—Ä: `requiresCashierConfirmation=true`, `assignedToAccount` = –∫–∞—Å—Å–∞ —Å–º–µ–Ω—ã
- ‚úÖ –ö–Ω–æ–ø–∫–∏: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å / –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Å –ø—Ä–∏—á–∏–Ω–æ–π
- ‚úÖ –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏: —Å–æ–∑–¥–∞–µ—Ç—Å—è Transaction (expense), –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã
- ‚úÖ –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏: payment –æ—Å—Ç–∞–µ—Ç—Å—è pending, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞

---

### US-3: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ –∫–∞—Å—Å—É

**–ö–∞–∫** –∫–∞—Å—Å–∏—Ä
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∫–∞—Å—Å—É –∏–∑ –¥—Ä—É–≥–∏—Ö —Å—á–µ—Ç–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
**–ß—Ç–æ–±—ã** –ø–æ–Ω–∏–º–∞—Ç—å –æ—Ç–∫—É–¥–∞ –≤–∑—è–ª–∏—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–ª–∏—á–Ω—ã–µ –≤ –∫–∞—Å—Å–µ

**Acceptance Criteria:**

- ‚úÖ –°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (transfers) –≤ —Ä–∞–∑–¥–µ–ª–µ —Å–º–µ–Ω—ã
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å: –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—á–µ—Ç–∞, —Å—É–º–º–∞, –¥–∞—Ç–∞, –∫—Ç–æ –ø–µ—Ä–µ–≤–µ–ª
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å–º–µ–Ω—ã
- ‚úÖ –£—á–µ—Ç –≤ `totalIncome` —Å–º–µ–Ω—ã (–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç sales revenue)

---

### US-4: –ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–∞—Å—Å—ã

**–ö–∞–∫** —Å–∏—Å—Ç–µ–º–∞
**–Ø –¥–æ–ª–∂–Ω–∞** –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã
**–ß—Ç–æ–±—ã** –∫–∞—Å—Å–∏—Ä –Ω–µ –º–æ–≥ –∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É —Å –º–∏–Ω—É—Å–æ–º

**Acceptance Criteria:**

- ‚úÖ –ü—Ä–∏ –±–∞–ª–∞–Ω—Å–µ –∫–∞—Å—Å—ã < 0 ‚Üí –∫—Ä–∞—Å–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞, warning badge
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É" –µ—Å–ª–∏ balance < 0
- ‚úÖ Alert: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –∫–∞—Å—Å—É."
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø–æ–∫–∞–∑–∞—Ç—å —Å—É–º–º—É –Ω–µ–¥–æ—Å—Ç–∞—á–∏ –∏ –∫–Ω–æ–ø–∫—É "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥"

---

### US-5: –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å–º–µ–Ω—ã

**–ö–∞–∫** –∫–∞—Å—Å–∏—Ä/–º–µ–Ω–µ–¥–∂–µ—Ä
**–Ø —Ö–æ—á—É** –≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ —Å–º–µ–Ω—É
**–ß—Ç–æ–±—ã** –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–µ–Ω–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫ –∏ —Å–≤–µ—Ä—è—Ç—å –±–∞–ª–∞–Ω—Å

**Acceptance Criteria:**

- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ —Å–º–µ–Ω—É (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ POS + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –∏–∑ backoffice)
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (supplier, utilities, salary, etc.)
- ‚úÖ –û–±—â–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
- ‚úÖ Breakdown: –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å + –¥–æ—Ö–æ–¥—ã - —Ä–∞—Å—Ö–æ–¥—ã = —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ –æ—Ç—á–µ—Ç —Å–º–µ–Ω—ã

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–≤–∞ —Ç–∏–ø–∞ —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

#### 1. Direct Expense (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ POS)

```typescript
{
  type: 'direct_expense',
  createdInPOS: true,
  requiresConfirmation: false,  // –ù–ï —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  status: 'completed',           // –°—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
  accountId: 'cash_register_1'   // –¢–æ–ª—å–∫–æ –∫–∞—Å—Å–∞
}
```

#### 2. Pending Supplier Payment (–∏–∑ backoffice)

```typescript
{
  type: 'supplier_payment',
  createdInPOS: false,
  requiresConfirmation: true,    // –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫–∞—Å—Å–∏—Ä–æ–º
  status: 'pending_confirmation',
  assignedToAccount: 'cash_register_1'
}
```

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. ExpenseOperationDialog.vue

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä—è–º–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ –∏–∑ –∫–∞—Å—Å—ã (Scenario 2)

**–£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è** (–±–µ–∑ pending, priority, account selection):

- Counteragent (Autocomplete)
- Amount (Number, IDR)
- Description (Textarea)
- Category (Select) - —Ç–æ–ª—å–∫–æ DailyExpenseCategory
- Invoice Number (optional)
- Notes (optional)

**–õ–æ–≥–∏–∫–∞**:

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ ‚Üí —Å—Ä–∞–∑—É —Å–ø–∏—Å–∞–Ω–∏–µ —Å –∫–∞—Å—Å—ã
- –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å < 0 ‚Üí warning, –Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å
- –ù–ï —Å–æ–∑–¥–∞–µ—Ç PendingPayment, —Å—Ä–∞–∑—É Transaction

---

### 2. ShiftExpensesList.vue

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**:

- –°–ø–∏—Å–æ–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ —Å–º–µ–Ω—É (–≤—Å–µ confirmed/completed)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ total

**–ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: Pending confirmations (–æ–Ω–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ)

---

### 3. PendingSupplierPaymentsList.vue (–ù–û–í–´–ô)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–æ–ª—å–∫–æ pending payments –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–∏–∑ backoffice)

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:

- PendingPayments —Å `requiresCashierConfirmation=true`
- –§–∏–ª—å—Ç—Ä –ø–æ `assignedToAccount` = –∫–∞—Å—Å–∞ —Å–º–µ–Ω—ã
- –ö–Ω–æ–ø–∫–∏: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å / –û—Ç–∫–ª–æ–Ω–∏—Ç—å

---

### 4. ShiftTransfersList.vue (–ù–û–í–´–ô)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Ö–æ–¥—è—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∫–∞—Å—Å—É

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:

- Transactions —Å `type='transfer'` –∏ `toAccountId` = –∫–∞—Å—Å–∞ —Å–º–µ–Ω—ã
- –ò—Å—Ç–æ—á–Ω–∏–∫ —Å—á–µ—Ç–∞, —Å—É–º–º–∞, –¥–∞—Ç–∞, –∫—Ç–æ –ø–µ—Ä–µ–≤–µ–ª
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `totalIncome` —Å–º–µ–Ω—ã

---

## –î–∞–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã

### ShiftTransaction (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)

```typescript
interface ShiftTransaction {
  id: string
  type: 'income' | 'expense' | 'transfer'
  amount: number
  description: string

  // –î–ª—è expense:
  category?: DailyExpenseCategory
  counteragentId?: string
  counteragentName?: string

  // –î–ª—è transfer:
  fromAccountId?: string
  fromAccountName?: string
  toAccountId?: string
  toAccountName?: string

  // Tracking:
  performedBy: TransactionPerformer
  performedAt: string

  // –°–≤—è–∑—å —Å pending payment (–µ—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑ backoffice)
  relatedPaymentId?: string
}
```

### ShiftAccountBalance (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)

```typescript
interface ShiftAccountBalance {
  // ... existing fields

  totalIncome: number // Sales + Transfers IN
  totalExpense: number // Direct expenses + Confirmed supplier payments

  // Breakdown:
  salesRevenue: number
  transfersIn: number
  directExpenses: number
  supplierPayments: number

  // Warning flag:
  isNegative: boolean
  canCloseShift: boolean // false if isNegative
}
```

---

## Workflow –¥–∏–∞–≥—Ä–∞–º–º—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: Direct Expense (POS)

```
Cashier clicks "–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ö–æ–¥"
    ‚Üì
ExpenseOperationDialog
    ‚Üì
Fill: Counteragent, Amount, Description, Category
    ‚Üì
Click "–°–æ–∑–¥–∞—Ç—å"
    ‚Üì
Validate: (amount > 0, description length, etc.)
    ‚Üì
Check balance: if (cashBalance - amount < 0) ‚Üí Show warning
    ‚Üì
User confirms ‚Üí Create Transaction directly
    ‚Üì
Update shift.accountBalances.totalExpense
    ‚Üì
Save to shift history
    ‚Üì
Update UI: ShiftExpensesList, Balance display
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Supplier Payment Confirmation (Backoffice ‚Üí POS)

```
Backoffice: Manager creates PurchaseOrder ‚Üí PendingPayment
    ‚Üì
Set: assignedToAccount = cash_register_1 (–∫–∞—Å—Å–∞)
    ‚Üì
Automatically: requiresCashierConfirmation = true
    ‚Üì
Sync to POS: (TODO: –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
    ‚Üì
POS: loadPendingPayments() ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –≤ PendingSupplierPaymentsList
    ‚Üì
Cashier: Review details ‚Üí Click "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" or "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
    ‚Üì
If Confirm:
  - Create Transaction (expense)
  - Update PendingPayment.status = 'completed'
  - Update shift.accountBalances.totalExpense
  - Remove from pending list
    ‚Üì
If Reject:
  - Update PendingPayment.status = 'rejected'
  - Save rejectionReason
  - Keep in backoffice for review
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Transfer to Cash Register

```
Backoffice: Manager creates Transfer
    ‚Üì
From: bank_account ‚Üí To: cash_register_1
    ‚Üì
Amount: 5,000,000 IDR
    ‚Üì
Sync to POS
    ‚Üì
POS Shift: Load transfers where toAccountId = shift.cashAccountId
    ‚Üì
Display in ShiftTransfersList
    ‚Üì
Update shift.accountBalances.transfersIn
    ‚Üì
Cashier sees: "–ü–µ—Ä–µ–≤–æ–¥: +5,000,000 –æ—Ç Bank Account"
```

---

## UI Layout –≤ POS Shift View

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –¢–µ–∫—É—â–∞—è —Å–º–µ–Ω–∞ #123                                      ‚îÇ
‚îÇ –ö–∞—Å—Å–∏—Ä: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤                                     ‚îÇ
‚îÇ –ù–∞—á–∞–ª–æ: 08:00  |  –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: 14:30                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ üí∞ –ë–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã: 2,500,000 IDR   [‚ö†Ô∏è –µ—Å–ª–∏ < 0]         ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ ‚îú‚îÄ –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:    1,000,000                       ‚îÇ
‚îÇ ‚îú‚îÄ –î–æ—Ö–æ–¥—ã (–ø—Ä–æ–¥–∞–∂–∏):   +8,000,000                       ‚îÇ
‚îÇ ‚îú‚îÄ –ü–µ—Ä–µ–≤–æ–¥—ã:           +2,000,000                       ‚îÇ
‚îÇ ‚îú‚îÄ –†–∞—Å—Ö–æ–¥—ã:            -8,500,000                       ‚îÇ
‚îÇ ‚îî‚îÄ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:      2,500,000                       ‚îÇ
‚îÇ                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì• –û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (2)         [Badge]            ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [PendingSupplierPaymentsList]                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ ‚îÇ Supplier: "Fresh Vegetables Ltd"          ‚îÇ           ‚îÇ
‚îÇ ‚îÇ –°—É–º–º–∞: 500,000 IDR                        ‚îÇ           ‚îÇ
‚îÇ ‚îÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ü—Ä–æ–¥—É–∫—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π  ‚îÇ           ‚îÇ
‚îÇ ‚îÇ [–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [–û—Ç–∫–ª–æ–Ω–∏—Ç—å]                 ‚îÇ           ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìä –†–∞—Å—Ö–æ–¥—ã —Å–º–µ–Ω—ã                  [+ –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ö–æ–¥]    ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [ShiftExpensesList]                                     ‚îÇ
‚îÇ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:                              ‚îÇ
‚îÇ - –ü—Ä–æ–¥—É–∫—Ç—ã: 3,000,000 (5 –æ–ø–µ—Ä–∞—Ü–∏–π)                     ‚îÇ
‚îÇ - –ö–æ–º–º—É–Ω–∞–ª–∫–∞: 1,200,000 (2 –æ–ø–µ—Ä–∞—Ü–∏–∏)                   ‚îÇ
‚îÇ - –ó–∞—Ä–ø–ª–∞—Ç–∞: 4,000,000 (8 –æ–ø–µ—Ä–∞—Ü–∏–π)                     ‚îÇ
‚îÇ - –ü—Ä–æ—á–µ–µ: 300,000 (1 –æ–ø–µ—Ä–∞—Ü–∏—è)                         ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ –ò—Ç–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤: 8,500,000 IDR                          ‚îÇ
‚îÇ                                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üí∏ –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∫–∞—Å—Å—É                                    ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ [ShiftTransfersList]                                    ‚îÇ
‚îÇ - Bank Account ‚Üí –ö–∞—Å—Å–∞: +2,000,000 (14:00, –ú–µ–Ω–µ–¥–∂–µ—Ä)   ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ –ò—Ç–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤: 2,000,000 IDR                         ‚îÇ
‚îÇ                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

[–ó–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É]  ‚Üê disabled if balance < 0
```

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å—Ö–æ–¥–∞ (Direct Expense):

1. ‚úÖ Amount > 0
2. ‚úÖ Description min 5 chars
3. ‚úÖ Counteragent selected
4. ‚úÖ Category selected
5. ‚ö†Ô∏è If (cashBalance - amount < 0) ‚Üí Show warning dialog:

   ```
   "–í–Ω–∏–º–∞–Ω–∏–µ! –ü–æ—Å–ª–µ —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã —Å—Ç–∞–Ω–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º.
   –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: 100,000 IDR
   –°—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–∞: 500,000 IDR
   –ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ: -400,000 IDR

   –í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"
   [–û—Ç–º–µ–Ω–∞] [–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å]
   ```

6. ‚úÖ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –≤ ShiftExpensesList

### –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ supplier payment:

1. ‚úÖ Payment exists –∏ status = 'pending'
2. ‚úÖ assignedToAccount —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞—Å—Å–µ —Å–º–µ–Ω—ã
3. ‚ö†Ô∏è Same negative balance warning
4. ‚úÖ –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ Account Store
5. ‚úÖ –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ ‚Üí require rejectionReason (min 10 chars)

### –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã:

1. ‚ùå –ï—Å–ª–∏ `accountBalances.cashBalance < 0` ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å

   ```
   Alert: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º –∫–∞—Å—Å—ã.

   –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: -400,000 IDR

   –î–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
   1. –ü–æ–ø–æ–ª–Ω–∏—Ç—å –∫–∞—Å—Å—É –ø–µ—Ä–µ–≤–æ–¥–æ–º –∏–∑ –¥—Ä—É–≥–æ–≥–æ —Å—á–µ—Ç–∞
   2. –ò–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

   [–ó–∞–ø—Ä–æ—Å–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥] [–û—Ç–º–µ–Ω–∞]"
   ```

2. ‚ö†Ô∏è –ï—Å–ª–∏ –µ—Å—Ç—å pending supplier payments ‚Üí show warning
   ```
   "–£ –≤–∞—Å –µ—Å—Ç—å 2 –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º.
   –í—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É –±–µ–∑ –∏—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è?"
   [–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—Å–µ] [–ó–∞–∫—Ä—ã—Ç—å –±–µ–∑ –Ω–∏—Ö] [–û—Ç–º–µ–Ω–∞]
   ```

---

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ (TODO: —É–ª—É—á—à–∏—Ç—å):

- **Polling –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥**: `loadPendingPayments()`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤—ã–µ PendingPayments –∏–∑ Account Store
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

### TODO: –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:

- [ ] **WebSocket / Firebase Realtime**: Real-time sync –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- [ ] **Server-Sent Events (SSE)**: Push notifications –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- [ ] **Event Bus**: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π pub/sub –º–µ–∂–¥—É stores –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- [ ] **Manual refresh button**: –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] **Conditional polling**: Polling —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ POS tab –∞–∫—Ç–∏–≤–µ–Ω (Page Visibility API)

### Offline-first —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (localStorage)
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–∏ ‚Üí —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã: –ø–æ–∫–∞–∑–∞—Ç—å warning, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –û—Ç–∫–∞–∑ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–π:

- ‚ùå **Priority –ø–æ–ª–µ**: –ù–µ –Ω—É–∂–Ω–æ –¥–ª—è direct expenses
- ‚ùå **Account selection**: –¢–æ–ª—å–∫–æ –∫–∞—Å—Å–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚ùå **Payment Mode "Create pending"**: –í—Å–µ —Ä–∞—Å—Ö–æ–¥—ã immediate
- ‚ùå **–ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤**: –ù–µ —Ä–µ–∞–ª–∏–∑—É–µ–º
- ‚ùå **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–æ–ª—è–º**: –í—Å–µ cashiers –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã

### –£–ø—Ä–æ—â–µ–Ω–∏—è:

- ‚úÖ **Direct Transaction creation**: –ë–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ PendingPayment –¥–ª—è direct expenses
- ‚úÖ **Single account**: –í—Å–µ–≥–¥–∞ —Å–ø–∏—Å–∞–Ω–∏–µ —Å –∫–∞—Å—Å—ã —Å–º–µ–Ω—ã
- ‚úÖ **Immediate application**: –†–∞—Å—Ö–æ–¥—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É (–Ω–µ pending)

### –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞:

```vue
<v-card
  :color="cashBalance < 0 ? 'error' : 'default'"
  :class="{ 'shake-animation': cashBalance < 0 }"
>
  <v-chip
    v-if="cashBalance < 0"
    color="error"
    prepend-icon="mdi-alert"
  >
    –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å!
  </v-chip>

  <div class="text-h4">
    {{ formatCurrency(cashBalance) }}
  </div>
</v-card>
```

---

## –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
src/views/pos/shifts/
‚îú‚îÄ‚îÄ dialogs/
‚îÇ   ‚îú‚îÄ‚îÄ ExpenseOperationDialog.vue           [NEW]
‚îÇ   ‚îî‚îÄ‚îÄ SupplierPaymentConfirmDialog.vue     [NEW]
‚îî‚îÄ‚îÄ components/
    ‚îú‚îÄ‚îÄ ShiftExpensesList.vue                [NEW]
    ‚îú‚îÄ‚îÄ PendingSupplierPaymentsList.vue      [NEW]
    ‚îî‚îÄ‚îÄ ShiftTransfersList.vue               [NEW]
```

### –ù–æ–≤—ã–µ services:

```
src/stores/pos/shifts/
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ expensesService.ts                   [NEW]
```

### –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:

```
src/stores/account/
‚îú‚îÄ‚îÄ types.ts                                 [UPDATE]
‚îî‚îÄ‚îÄ store.ts                                 [UPDATE]

src/stores/pos/shifts/
‚îú‚îÄ‚îÄ types.ts                                 [UPDATE]
‚îî‚îÄ‚îÄ shiftsStore.ts                           [UPDATE]

src/core/
‚îî‚îÄ‚îÄ appInitializer.ts                        [UPDATE]
```

---

## Timeline

### Phase 1: –¢–∏–ø—ã –∏ Store (Day 1, 3 —á–∞—Å–∞)

- [ ] –û–±–Ω–æ–≤–∏—Ç—å Account types: PendingPayment –ø–æ–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã: confirmPayment, rejectPayment
- [ ] –û–±–Ω–æ–≤–∏—Ç—å Shifts types: ShiftTransaction, ShiftAccountBalance
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã: createDirectExpense, loadPendingPayments

### Phase 2: Services (Day 1, 1.5 —á–∞—Å–∞)

- [ ] –°–æ–∑–¥–∞—Ç—å expensesService.ts
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å localStorage persistence
- [ ] Polling –º–µ—Ö–∞–Ω–∏–∑–º (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) + TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

### Phase 3: POS UI Components (Day 2, 4 —á–∞—Å–∞)

- [ ] ExpenseOperationDialog.vue
- [ ] PendingSupplierPaymentsList.vue
- [ ] SupplierPaymentConfirmDialog.vue
- [ ] ShiftExpensesList.vue
- [ ] ShiftTransfersList.vue

### Phase 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Shift View (Day 2, 2 —á–∞—Å–∞)

- [ ] –ù–∞–π—Ç–∏ CurrentShiftView –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏–∏: Pending, Expenses, Transfers
- [ ] Balance display —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π negative
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã –ø—Ä–∏ balance < 0

### Phase 5: Backoffice Updates (Day 3, 1 —á–∞—Å)

- [ ] Payment form: auto-set requiresCashierConfirmation
- [ ] Payment list: –ø–æ–∫–∞–∑–∞—Ç—å confirmation status

### Phase 6: Testing (Day 3, 2 —á–∞—Å–∞)

- [ ] Direct expense creation
- [ ] Supplier payment confirmation/rejection
- [ ] Transfer display
- [ ] Negative balance warnings
- [ ] Shift close blocking
- [ ] Offline mode

**Total: ~13.5 —á–∞—Å–æ–≤ (2-3 –¥–Ω—è)**

---

## Risks & Mitigation

| –†–∏—Å–∫                                       | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è                                |
| ------------------------------------------ | ----------- | ------- | ---------------------------------------- |
| Polling –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É  | –°—Ä–µ–¥–Ω—è—è     | –°—Ä–µ–¥–Ω–µ–µ | TODO: –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ WebSocket/SSE           |
| –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –∫–∞—Å—Å—ã –Ω–µ –∑–∞–º–µ—á–µ–Ω      | –ù–∏–∑–∫–∞—è      | –í—ã—Å–æ–∫–æ–µ | –ö—Ä–∞—Å–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ + –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è  |
| –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ offline —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏        | –°—Ä–µ–¥–Ω—è—è     | –°—Ä–µ–¥–Ω–µ–µ | Warning –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ, –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å |
| –ö–∞—Å—Å–∏—Ä –∑–∞–±—ã–ª –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å supplier payments | –°—Ä–µ–¥–Ω—è—è     | –ù–∏–∑–∫–æ–µ  | Warning –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã               |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ (POS + backoffice)   | –ù–∏–∑–∫–∞—è      | –°—Ä–µ–¥–Ω–µ–µ | –ù–µ —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É (–ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)    |

---

## Success Metrics

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

- ‚úÖ 100% —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–∑ –∫–∞—Å—Å—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ 0 —Å–º–µ–Ω –∑–∞–∫—Ä—ã—Ç–æ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º
- ‚úÖ 95%+ supplier payments –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–º–µ–Ω—ã
- ‚úÖ –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ < 30 —Å–µ–∫—É–Ω–¥

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:

- ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç offline
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è < 30 —Å–µ–∫—É–Ω–¥ (polling)
- ‚úÖ 0 –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ UI responsive –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## Future Enhancements (Backlog)

- [ ] Real-time sync –≤–º–µ—Å—Ç–æ polling (WebSocket/Firebase)
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: admin/manager vs cashier permissions
- [ ] –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ä–∞—Å—Ö–æ–¥–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–≤–æ–¥–∞ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ (–Ω–µ hardcoded)
- [ ] –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —á–µ–∫–æ–≤/–Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ Excel/PDF
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤: —Ç—Ä–µ–Ω–¥—ã, –ø—Ä–æ–≥–Ω–æ–∑—ã
- [ ] –õ–∏–º–∏—Ç—ã –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤
- [ ] Approval workflow: –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö —Å—É–º–º
