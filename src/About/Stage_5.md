üìã –ê–Ω–∞–ª–∏–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è
–ò–∑—É—á–∏–ª –≤–∞—à–µ –¢–ó –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–¥–æ–≤—É—é –±–∞–∑—É. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —É—á—Ç–µ–Ω—ã –∏ –ø–æ–Ω—è—Ç–Ω—ã. –í–æ—Ç –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —è —É—á–µ–ª:
‚úÖ –£—á—Ç–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - —É–ø—Ä–æ—Å—Ç–∏–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —É–±—Ä–∞–ª —Å–ª–æ–∂–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ
–î–≤–∞ —Å–∫–ª–∞–¥–∞ (Kitchen/Bar) - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —Å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º —É—á–µ—Ç–æ–º
–ë—ã—Å—Ç—Ä—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è - –µ–¥–∏–Ω—ã–π –¥–∏–∞–ª–æ–≥ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤/–ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–æ–≤/–±–ª—é–¥
–£–¥–æ–±–Ω–∞—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –¥–ª—è Products –∏ Preparations —Å –ø–æ–ª–Ω—ã–º–∏ —Å–ø–∏—Å–∫–∞–º–∏
–£—á–µ—Ç –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–æ–≤ - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ preparations –Ω–∞—Ä–∞–≤–Ω–µ —Å products
FIFO –ø—Ä–∏–Ω—Ü–∏–ø - —Å—Ç—Ä–æ–≥–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è "–ø–µ—Ä–≤—ã–π –ø—Ä–∏—à–µ–ª - –ø–µ—Ä–≤—ã–π —É—à–µ–ª"
–î–∏–Ω–∞–º–∏–∫–∞ —Ü–µ–Ω - —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ + —Ç—Ä–µ–Ω–¥—ã, FIFO –¥–ª—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
–ü—Ä–∏—Ö–æ–¥—ã —Å –∫–æ—Ä—Ä–µ–∫—Ü–∏—è–º–∏ - –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è SupplierStore
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö mock –¥–∞–Ω–Ω—ã—Ö - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Product –∏ Recipe stores

üèóÔ∏è –≠—Ç–∞–ø—ã —Å–æ–∑–¥–∞–Ω–∏—è:
Phase 1: StorageStore (Week 1)

–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è —Å–∫–ª–∞–¥–∞
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è FIFO –ª–æ–≥–∏–∫–∏ —Å batch tracking
Mock –¥–∞–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö products/preparations
–ë–∞–∑–æ–≤—ã–π StorageService –∏ StorageStore

Phase 2: StorageStore and PreparationStore UI (Week 2)

StorageView —Å —Ç–∞–±–∞–º–∏ Kitchen/Bar
–ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π/–∫–æ—Ä—Ä–µ–∫—Ü–∏–π
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Product/Recipe stores

Phase 3: SupplierStore (Week 3)

–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –∏ –∑–∞–∫—É–ø–æ–∫
Workflow —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å StorageStore –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π
UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏

Phase 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AccountStore (Week 4)

–°–≤—è–∑—å —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º
–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

Phase 5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (Week 5)

–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Menu Store –¥–ª—è –∞–≤—Ç–æ—Å–ø–∏—Å–∞–Ω–∏—è
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ UX

üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:

MultiConsumptionDialog - –º–æ–∂–Ω–æ –∑–∞ —Ä–∞–∑ –¥–æ–±–∞–≤–∏—Ç—å –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π
–†–∞–∑–¥–µ–ª—å–Ω–∞—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è - –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–∞–±—ã –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–æ–≤
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ü–µ–Ω - —Ç—Ä–µ–Ω–¥—ã, —Å—Ä–µ–¥–Ω–∏–µ —Ü–µ–Ω—ã, FIFO —Ä–∞—Å—á–µ—Ç—ã
–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø - –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ –±—ã—Å—Ç—Ä–æ–º –¥–æ—Å—Ç—É–ø–µ
Department-based - –ø–æ–ª–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Kitchen –∏ Bar
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å mock –¥–∞–Ω–Ω—ã–º–∏ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö products –∏ recipes

# üì¶ Storage & Supplies Management System - Updated Technical Specification

## üéØ Key Changes Based on Requirements

### Simplified Initial Implementation:

1. **Two departments**: Kitchen and Bar (separate stock management)
2. **Quick consumption workflow**: Multi-item consumption in single dialog
3. **Inventory management**: Separate tabs for Products and Preparations with full stock lists
4. **FIFO cost calculation**: First In, First Out principle
5. **Price analytics**: Average costs and cost trends tracking
6. **Corrections via Storage**: Basic receiving with correction flag
7. **Test with existing mock data**: Use products and preparations from existing stores

---

## üîÑ Updated Module Relationships

### **Storage Store ‚Üî Existing Modules:**

#### **‚Üí Product Store (Read Only)**

```typescript
// Use existing products from mock data
interface Product {
  id: string
  name: string
  category: string
  unit: string // 'kg', 'liter', 'piece', etc.
  minStock?: number
  shelfLife?: number
}
```

#### **‚Üí Recipe Store (Read Only)**

```typescript
// Use existing preparations from mock data
interface Preparation {
  id: string
  name: string
  type: 'preparation'
  outputQuantity: number
  outputUnit: string
}
```

---

## üìä Storage Store Specification

### **Core Entities:**

#### **StorageBatch** - Individual stock lots with FIFO tracking

```typescript
interface StorageBatch extends BaseEntity {
  // Identification
  batchNumber: string // "B-BEEF-001-20250205"
  itemId: string // Product or Preparation ID
  itemType: 'product' | 'preparation'
  department: 'kitchen' | 'bar'

  // Quantity tracking
  initialQuantity: number // Original received quantity
  currentQuantity: number // Remaining quantity
  unit: string // kg, liter, piece, etc.

  // Cost tracking (FIFO)
  costPerUnit: number // Cost per unit for THIS batch
  totalValue: number // currentQuantity √ó costPerUnit

  // Dates and expiry
  receiptDate: string // When batch was received
  expiryDate?: string // When batch expires

  // Source tracking
  sourceType: 'purchase' | 'production' | 'correction' | 'opening_balance'
  notes?: string

  // Status
  status: 'active' | 'expired' | 'consumed'
  isActive: boolean
}
```

#### **StorageOperation** - All inventory movements

```typescript
interface StorageOperation extends BaseEntity {
  // Operation details
  operationType: 'receipt' | 'consumption' | 'inventory' | 'correction'
  documentNumber: string // "REC-001", "CON-001", "INV-001"
  operationDate: string
  department: 'kitchen' | 'bar'

  // Responsible person
  responsiblePerson: string // Who performed the operation

  // Items involved
  items: StorageOperationItem[]

  // Financial impact
  totalValue?: number // Total cost impact of operation

  // Consumption tracking with quick selection
  consumptionDetails?: {
    reason: 'recipe' | 'menu_item' | 'waste' | 'expired' | 'other'
    relatedId?: string // Recipe ID, Menu Item ID, etc.
    relatedName?: string // Human readable name
    portionCount?: number // How many portions made
  }

  // Status and workflow
  status: 'draft' | 'confirmed'
  notes?: string
}

interface StorageOperationItem {
  id: string
  itemId: string // Product or Preparation ID
  itemType: 'product' | 'preparation'
  itemName: string // Cached name for display

  // Quantity
  quantity: number
  unit: string

  // FIFO allocation (for consumption)
  batchAllocations?: BatchAllocation[]

  // Cost tracking
  totalCost?: number // Calculated total cost
  averageCostPerUnit?: number // Weighted average cost

  // Additional details
  notes?: string
  expiryDate?: string // For receipts
}

interface BatchAllocation {
  batchId: string // Which batch to consume from
  batchNumber: string // Human readable batch number
  quantity: number // How much from this batch
  costPerUnit: number // Cost per unit from this batch
  batchDate: string // Receipt date of batch (for FIFO verification)
}
```

#### **StorageBalance** - Current stock summary with analytics

```typescript
interface StorageBalance {
  // Item identification
  itemId: string
  itemType: 'product' | 'preparation'
  itemName: string // Cached name
  department: 'kitchen' | 'bar'

  // Current stock
  totalQuantity: number // Sum of all active batches
  unit: string

  // Financial summary with price analytics
  totalValue: number // Total value of all batches
  averageCost: number // Weighted average cost per unit
  latestCost: number // Cost of most recent batch
  costTrend: 'up' | 'down' | 'stable' // Price trend indicator

  // FIFO batch details
  batches: StorageBatch[] // All active batches (sorted FIFO - oldest first)
  oldestBatchDate: string // Date of oldest batch
  newestBatchDate: string // Date of newest batch

  // Alerts and warnings
  hasExpired: boolean // Has any expired batches
  hasNearExpiry: boolean // Has batches expiring within 3 days
  belowMinStock: boolean // Below minimum stock level

  // Usage analytics
  lastConsumptionDate?: string // When last consumed
  averageDailyConsumption?: number // Moving average consumption
  daysOfStockRemaining?: number // Estimated days until stockout

  // Cache timestamps
  lastCalculated: string // When this balance was calculated
}
```

#### **InventoryDocument** - Periodic stock takes (Products & Preparations separate)

```typescript
interface InventoryDocument extends BaseEntity {
  // Document details
  documentNumber: string // "INV-KITCHEN-PROD-001"
  inventoryDate: string
  department: 'kitchen' | 'bar'
  itemType: 'product' | 'preparation' // Separate inventories

  // Responsible person
  responsiblePerson: string

  // Inventory results
  items: InventoryItem[]

  // Summary
  totalItems: number // Number of items counted
  totalDiscrepancies: number // Number of items with differences
  totalValueDifference: number // Total financial impact

  // Status
  status: 'draft' | 'confirmed'
  notes?: string
}

interface InventoryItem {
  id: string
  itemId: string
  itemType: 'product' | 'preparation'
  itemName: string // Cached name

  // Quantities
  systemQuantity: number // Quantity per system
  actualQuantity: number // Actual counted quantity
  difference: number // actualQuantity - systemQuantity

  // Financial impact
  unit: string
  averageCost: number // Current average cost per unit
  valueDifference: number // difference √ó averageCost

  // Details
  notes?: string // Reasons for discrepancy
  countedBy?: string // Who counted this item
}
```

### **Store State:**

```typescript
interface StorageState {
  // Core data
  batches: StorageBatch[]
  operations: StorageOperation[]
  balances: StorageBalance[]
  inventories: InventoryDocument[]

  // UI state
  loading: {
    balances: boolean
    operations: boolean
    inventory: boolean
    consumption: boolean
  }
  error: string | null

  // Quick access data for consumption dialog
  quickItems: {
    products: Product[] // Popular products
    preparations: Preparation[] // Popular preparations
    menuItems: MenuItem[] // For consumption tracking
  }

  // Filters and search
  filters: {
    department: 'kitchen' | 'bar' | 'all'
    itemType: 'product' | 'preparation' | 'all'
    showExpired: boolean
    showBelowMinStock: boolean
    showNearExpiry: boolean
    search: string
    dateFrom?: string
    dateTo?: string
  }

  // Settings
  settings: {
    expiryWarningDays: number // Days before expiry to show warning (default: 3)
    lowStockMultiplier: number // Multiplier of minStock for low stock warning (default: 1.2)
    autoCalculateBalance: boolean // Auto-recalculate balances on operations (default: true)
  }
}
```

### **Key Methods:**

#### **FIFO Operations:**

```typescript
// FIFO consumption with automatic batch allocation
async createConsumption(data: CreateConsumptionData): Promise<StorageOperation>

// FIFO cost calculation
calculateFifoAllocation(
  itemId: string,
  itemType: 'product' | 'preparation',
  department: 'kitchen' | 'bar',
  quantity: number
): BatchAllocation[]

// Get consumption cost based on FIFO
calculateConsumptionCost(
  itemId: string,
  itemType: 'product' | 'preparation',
  department: 'kitchen' | 'bar',
  quantity: number
): number
```

#### **Quick Operations:**

```typescript
// Get popular items for quick selection
getQuickProducts(department: 'kitchen' | 'bar'): Product[]
getQuickPreparations(department: 'kitchen' | 'bar'): Preparation[]
getQuickMenuItems(): MenuItem[]

// Multi-item consumption
async createMultiItemConsumption(
  items: ConsumptionItem[],
  department: 'kitchen' | 'bar',
  responsiblePerson: string,
  consumptionDetails?: ConsumptionDetails
): Promise<StorageOperation>
```

#### **Inventory Management:**

```typescript
// Full inventory with all items
async startInventory(
  department: 'kitchen' | 'bar',
  itemType: 'product' | 'preparation'
): Promise<InventoryDocument>

// Update inventory counts
async updateInventoryItem(
  inventoryId: string,
  itemId: string,
  actualQuantity: number,
  notes?: string
): Promise<void>

// Finalize inventory and create corrections
async finalizeInventory(inventoryId: string): Promise<StorageOperation[]>
```

#### **Analytics and Price Tracking:**

```typescript
// Price trend analysis
getPriceTrends(itemId: string, months: number): PriceTrend[]
getAverageCosts(department: 'kitchen' | 'bar'): ItemCostSummary[]

// Consumption analytics
getConsumptionHistory(itemId: string, days: number): ConsumptionHistory[]
getTopConsumedItems(department: 'kitchen' | 'bar', limit: number): ItemUsageSummary[]

// Alerts
getExpiringItems(days: number): StorageBalance[]
getLowStockItems(): StorageBalance[]
```

---

## üé® UI Components Architecture

### **StorageView.vue** - Main dashboard with department tabs

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üì¶ Storage Management                       ‚îÇ
‚îÇ ‚îú‚îÄ [Kitchen] [Bar] (department tabs)        ‚îÇ
‚îÇ ‚îú‚îÄ Quick Actions: [‚ûñ Multi Consumption]    ‚îÇ
‚îÇ ‚îÇ                  [üìã Inventory Products]  ‚îÇ
‚îÇ ‚îÇ                  [üìã Inventory Prep.]     ‚îÇ
‚îÇ ‚îÇ                  [‚ûï Receipt/Correction]  ‚îÇ
‚îÇ ‚îú‚îÄ Alerts: [‚ö†Ô∏è Expiring (3)] [üìâ Low (5)]  ‚îÇ
‚îÇ ‚îú‚îÄ Stock Overview:                          ‚îÇ
‚îÇ ‚îÇ  ‚îå‚îÄ [Products] [Preparations] tabs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ ‚îÇ  ‚îÇ Item | Stock | Avg Cost | Trend | Actions‚îÇ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•© Beef | 2.5kg | 180k | üìà+5% | [‚ûñ][üì¶]‚îÇ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•î Potato | 15kg | 8k | üìâ-2% | [‚ûñ][üì¶]‚îÇ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ ‚îî‚îÄ Recent Operations: [View All]            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **MultiConsumptionDialog.vue** - Quick multi-item consumption

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Multi-Item Consumption - Kitchen            ‚îÇ
‚îÇ ‚îú‚îÄ Responsible: [Chef Maria ‚ñº]             ‚îÇ
‚îÇ ‚îú‚îÄ Usage Type: [Recipe ‚ñº] ‚Üí Beef Rendang   ‚îÇ
‚îÇ ‚îú‚îÄ Quick Add Popular Items:                ‚îÇ
‚îÇ ‚îÇ  [ü•© Beef] [ü•î Potato] [üßÑ Garlic] [More‚ñº]‚îÇ
‚îÇ ‚îú‚îÄ Items to Consume:                       ‚îÇ
‚îÇ ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•© Beef Steak                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Available: 2.5kg                    ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Consume: [1.5] kg                   ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ FIFO: 1.5kg from B-BEEF-001 @180k  ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Cost: 270,000 IDR          [Remove] ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•î Potato                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Available: 15kg                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Consume: [2] kg                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Cost: 16,000 IDR           [Remove] ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇ  [+ Add Item] [üìã Add from Recipe]      ‚îÇ
‚îÇ ‚îú‚îÄ Total Cost: 286,000 IDR                 ‚îÇ
‚îÇ ‚îî‚îÄ [Cancel] [Confirm Consumption]          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **InventoryDialog.vue** - Full inventory management

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Inventory - Kitchen Products                ‚îÇ
‚îÇ ‚îú‚îÄ Date: [05.02.25] Person: [Manager ‚ñº]    ‚îÇ
‚îÇ ‚îú‚îÄ Filter: [üîç Search] [‚ö†Ô∏è Discrepancies]   ‚îÇ
‚îÇ ‚îú‚îÄ Progress: 25/30 items counted            ‚îÇ
‚îÇ ‚îú‚îÄ Items List:                             ‚îÇ
‚îÇ ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•© Beef Steak                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ System: 2.5kg                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Actual: [2.3] kg  ‚ö†Ô∏è -0.2kg        ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Notes: [Normal shrinkage...]        ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  ‚îÇ ü•î Potato                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ System: 15kg                        ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îÇ Actual: [15] kg  ‚úÖ Match           ‚îÇ ‚îÇ
‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îú‚îÄ Summary: Discrepancies: 3 Value: -45k   ‚îÇ
‚îÇ ‚îî‚îÄ [Save Draft] [Finalize Inventory]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ Implementation Phases

### **Phase 1: Storage Store Foundation (Week 1)**

- [ ] Create storage types based on existing product/preparation interfaces
- [ ] Implement FIFO calculation logic with batch tracking
- [ ] Create mock storage data using existing products/preparations
- [ ] Build StorageService with CRUD operations
- [ ] Set up StorageStore with state management

**Mock Data Integration:**

```typescript
// Use existing mock products and preparations
const mockProducts = [
  { id: 'beef-steak', name: 'Beef Steak', category: 'meat', unit: 'kg' },
  { id: 'potato', name: 'Potato', category: 'vegetable', unit: 'kg' }
  // ... existing products
]

const mockPreparations = [
  { id: 'beef-rendang', name: 'Beef Rendang', outputQuantity: 10, outputUnit: 'portion' }
  // ... existing preparations
]

// Create initial batches for testing
const mockBatches = [
  {
    itemId: 'beef-steak',
    itemType: 'product',
    department: 'kitchen',
    currentQuantity: 2.5,
    costPerUnit: 180000,
    receiptDate: '2025-02-01',
    sourceType: 'opening_balance'
  }
]
```

### **Phase 2: Storage UI (Week 2)**

- [ ] StorageView with Kitchen/Bar tabs and stock overview
- [ ] MultiConsumptionDialog with quick item selection
- [ ] Basic receiving/correction functionality
- [ ] Integration with existing Product/Recipe stores
- [ ] FIFO cost display and price trend indicators

### **Phase 3: Inventory Management (Week 3)**

- [ ] InventoryDialog with full item lists (Products & Preparations separate)
- [ ] Inventory workflow: count ‚Üí discrepancies ‚Üí finalize
- [ ] Automatic correction generation from inventory
- [ ] Inventory history and reporting

### **Phase 4: Analytics & Polish (Week 4)**

- [ ] Price trend analysis and cost tracking
- [ ] Consumption analytics and reporting
- [ ] Advanced alerts and notifications
- [ ] Performance optimization and caching
- [ ] User testing and bug fixes

### **Phase 5: Future Expansion (Week 5+)**

- [ ] Integration with Menu Store for automatic consumption
- [ ] Advanced recipe-based consumption tracking
- [ ] Supplier management integration (SupplierStore)
- [ ] Account Store integration for financial tracking

---

## üéØ Success Criteria

### **Technical Requirements:**

- ‚úÖ FIFO cost calculation with 100% accuracy
- ‚úÖ Real-time stock balance updates across departments
- ‚úÖ Quick multi-item consumption workflow
- ‚úÖ Separate inventory management for Products and Preparations
- ‚úÖ Price trend tracking and average cost calculation

### **Business Requirements:**

- ‚úÖ Support for Kitchen and Bar departments
- ‚úÖ Easy consumption tracking with recipe/menu integration
- ‚úÖ Comprehensive inventory management
- ‚úÖ Price analytics for menu cost calculation
- ‚úÖ FIFO principle for accurate cost tracking

### **User Experience Requirements:**

- ‚úÖ Quick access to popular items in consumption
- ‚úÖ Single dialog for multi-item operations
- ‚úÖ Clear price trends and cost information
- ‚úÖ Intuitive inventory counting interface
- ‚úÖ Department-based stock management

---

This specification provides a simplified yet comprehensive approach that addresses all your requirements while maintaining integration with existing systems and preparing for future expansion to supplier management and financial integration.
